---
title: UML系列时序图（顺序图）sequence diagram
thumbnail: 
categories: 其他
tags: [UML]
---

### 引言

> 用例图、类图、活动图、时序图之间是什么关系？

> 时序图有什么作用？

      先来模拟一下三国演义的赤壁之战的时序图，先知道它到底长什么样子，再深入介绍：

![](20191627-50286479c12b491997c28034fa1e80fc.png)  

 小伙伴惊呆了，这样画战略图，一目了然，原来著名的战役是这么回事。这样看三国演义再也不会睡着了......

再看看各个大人物的主要操作：

![](20192222-9f22ca467bd647cc87c452e78fb11388.png)![](20192258-3ce6eac6e83b45058e1c4b571c1dc6ee.png)  

![](20192337-72f19b3150074f99a98467c920551220.png)![](20192402-3267135fc93142efb05f49b5ed2647d7.png)![](20192410-5e992a10eaac451a8cce1052fe037b51.png)  

代码模拟各任务操作：

[![](copycode.gif)  
](file:///Applications/%E5%8D%B0%E8%B1%A1%E7%AC%94%E8%AE%B0.app/Contents/Resources
/common-editor-mac/mac.html# "复制代码")

```
public class 关羽 {

    public void 防守荊州();

}

public class 张飞 {

    public void 防守荆州前线();

}

public class 孙权 {

    public void 领兵相助();

}

public class 刘备 {

    public void 应战();

}

public class 孔明 {

    public void 拟定策略();

    public void 联合孙权();

    private void 借东风火攻();

}
```

[![](copycode.gif)  
](file:///Applications/%E5%8D%B0%E8%B1%A1%E7%AC%94%E8%AE%B0.app/Contents/Resources
/common-editor-mac/mac.html# "复制代码")

     (以上为伪代码，只为说明问题，缩短文章长度)。

### 分析一：用例图、活动图、时序图之间的关系

![](20193505-cf3c1a6645d548e293cb3aa69d335159.png)  

### 分析二：类图与时序图之间的关系

 ![](20194242-91d35200fbb74c57a24fa4774855af7b.png)  

![](20194339-db56b08b049146b4b78b4aa4daec107f.png)  

![](20194500-8b0e002058fc4a6abb2d5ba78ca6fec8.png)  

类图描述系统的静态结构，时序图描述系统的动态行为。

若出现了一个新的消息（不是类中的操作），则需要为类添加一个新的操作。

![](20194909-d8d8fd9d35134cbc96a5879cadb25f7f.png)  

为类c添加k操作。如果这里不容易理解，可以参考上面的赤壁大战的时序图，你就知道该新加的操作到底是类B的还是C的。

### 时序图的作用

用对象间的交互来描述用例。（注意是对象间的）

寻找类的操作。

### 时序图的概念

时序图描述了对象之间传递消息的时间顺序，它用来表示用例的行为顺序。

###  时序图的组成

![](20194339-db56b08b049146b4b78b4aa4daec107f.png)  

 对象

对象是类的实例，对象是通过类来创建的，我们可以把类看作是创建对象的模版。

对象的符号

 时序图中的每个大峡谷显示单独的列里。

![](20200707-a8628b9cddb9423097a1fdfc67135044.png)  

 对象的左右排列位置

对象的左右顺序并不重要，但是为了画图画的清晰整洁起见，通常应遵循一下两个原则：

（1）把交互频繁的对象尽可能地靠拢。

（2）把初始化整个交互活动的对象（有时是一个参与者）放置在最左边。

生命线lifeline

表示对象的生存时间。生命线从对象创建开始到对象销毁时终止。

![](20202115-f65ed70cf70d484f90f648fbf550ed5f.png)对象在生命线上的两种状态：休眠状态、激活状态。

 消息

消息的概念：

对象之间的交互是通过相互发消息来实现的。一个对象可以请求（要求）另一个对象做某件事件。

消息从源对象指向目标对象。消息一旦发送便将控制从源对象转移到目标对象。

![](20194339-db56b08b049146b4b78b4aa4daec107f.png)  

 时序图中，消息的阅读顺序是严格自上而下的。

 消息的类型与符号

 ![](20203237-684175dd526349d5bd9e651c907d6e95.png)  

  

实例：同步异步

你叫我去吃饭，我听到了就和你去吃饭；如果没有听到，你就不停的叫，直到我告诉你听到了，才一起去吃饭。

你叫我去吃饭，然后自己去吃饭，我得到消息后可能立即走，也可能等到下班才去吃饭。

![](20203516-d6aa5db4c4234a488260b399677b23a7.png)  

所以，要我请你吃饭就用同步的方法，要请我吃饭就用异步的方法，这样你可以省钱。^_^!

（1）简单消息

简单消息是没有区分同步和异步的消息。

简单消息用从一对下岗的生命线指向另一个对象的生命线的直线箭头来表示，箭头上面标出消息名。

![](20210531-815f5970fa714745a3e3ad9cca321d8f.png)  

（2）同步消息

消息的发送者把进程控制传递给消息的接收者，然后暂停活动，等待消息接收者的回应消息。

![](20204005-8a15b871a5cc42c28c74d829dea4f7b7.png)  

你叫我去吃饭，我听到了就和你去吃饭；如果没有听到，你就不停的叫，直到我告诉你听到了，才一起去吃饭。

（3）异步消息

消息的发送者将消息发送给消息的接受者后，不用等待回应的消息，即可开始另一个活动。

![](20204246-77063a575bec4a87bdef462e7944d405.png)  

你叫我去吃饭，然后自己去吃饭，我得到消息后可能立即走，也可能等到下班才去吃饭。

激活

激活的概念

当一个对象没有被激活期时，该对象处于休眠状态，什么事都不做，但它仍然存在，等待新的消息来激活它。

当一条消息被传递给对象的时候，它会触发该对象的某个行为，这就是说该对象被激活了。

当一个对象处于激活期时，表明该对象正处于执行某个动作。

激活的符号

激活用一个细长的矩阵框（在生命线上）表示。

![](20210531-815f5970fa714745a3e3ad9cca321d8f.png)  

矩形框的高度表示对象执行一个操作所经历的时间段，矩形的顶部表示动作的开始，底部表示动作的结束。

对象接收消息后可以由自己的某个操作来完成，也可以通过其他对象的操作来完成。

  

### 总结

时序图到此结束，如果有需要补充的可以留言，lz定补上。

时序图还是听复杂的，遇到问题得好好分析......

矩形框的高度表示对象执行一个操作所经历的时间段，矩形的顶部表示动作的开始，底部表示动作的结束。

对象接收消息后可以由自己的某个操作来完成，也可以通过其他对象的操作来完成。

比如下面的三张图表达的意思就不同了：

![](20213225-881631f2ffc448ef80e448a0582daab4.png)  

如果能把这三个图的区别搞明白了，时序图也掌握的差不多......Thinking.....

  

![](1A90351F-8695-47EE-BDDA-E91063E49690.png)

### 返回消息

返回的消息。虚线的线性箭头表示。

![](7B4130BD-8C98-48AC-BA9A-8D01F0F5E48B.png)  

### 自关联消息

自身调用自身的方法。即自我调用的同步消息。  

![](F87A4E6F-A057-407E-86AD-E684CC47F22B.png)  

## 组合

对一个交互过程的执行条件进行限定。

### 选择组合

表明组合中的内容可能执行可能不执行，根据条件进行判断。

  

![](09B2B47F-C94B-4D1A-B7AC-5AA0DC43A818.png)

### 替换组合

类似与if..else和[switch](https://www.baidu.com/s?wd=switch&tn=24004469_oem_dg&rsv_dl=gh_pl_sl_csd)，多个组合中选择一个执行。

  

![](B43FE803-643F-4ED8-9F7B-32F4BAABD286.png)

### 其他

组合情况下面的情况，摘自网络。

  

![](7ABBBC61-9025-447C-A0A5-57C795B1AB28.png)

## 一个简单例子

![](07B265AA-1F0D-4ABF-AA50-36CBCE3694FF.png)  

  

